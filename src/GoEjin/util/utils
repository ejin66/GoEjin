package util

import (
	"encoding/json"
	"GoEjin/model"
	"regexp"
)

func Json(data interface{}) string {
	result, err := json.Marshal(data)
	if err != nil {
		return Error(300, "请求出错")
	}
	return string(result)
}

func ResponseFormat(data interface{}) string{
	response := model.Response{0, "OK", data}
	result,_ := json.Marshal(response)
	return string(result)
}

func Error(errorCode int, errorMsg string) string {
	response := model.Response{errorCode, errorMsg, nil}
	result,_ := json.Marshal(response)
	return string(result)
}

func Substring(s string, from int, length int) string {
	if len(s) < length + from {
		length = len(s) - from
	}
	return s[from : length + from]
}

func Replace(s string, new string, regex string) string {
	reg := regexp.MustCompile(regex)
	return reg.ReplaceAllString(s, new)
}
